#! /usr/bin/python2

import mat
import numpy as np


def cmp(m, t):
    assert(isinstance(m, np.ndarray))
    assert(isinstance(t, np.ndarray))
    assert(m.dtype == t.dtype)
    assert(m.shape == t.shape)
    assert(np.allclose(m, t))

# -------------------------------------------------- Mat
cmp(mat.mat(), np.array([[113, 65],
                         [70, 143],
                         [154, 194]],
                        dtype=np.uint8))

mat.mat(np.array([[-1174, -6302],
                  [-17670, 17012],
                  [-10228, 27393]],
                 dtype=np.int16))

cmp(mat.mat_r(), np.array([[57759, 49461],
                           [8358, 52972],
                           [12458, 4139]],
                          dtype=np.uint16))

mat.mat_r(np.array([[[24461, 84053], [-45230, -59792]],
                    [[86076, -65378], [41973, 6477]],
                    [[-36188, -22605], [-42794, 6418]]],
                   dtype=np.int32))

cmp(mat.mat_p(), np.array([[[0.960, 0.560, 0.259, 0.386], [0.555, 0.142, 0.600, 0.261]],
                           [[0.049, 0.537, 0.121, 0.397], [0.958, 0.903, 0.178, 0.737]],
                           [[0.386, 0.206, 0.546, 0.805], [0.069, 0.747, 0.553, 0.688]]],
                          dtype=np.float32))

mat.mat_p(np.array([[[0.606, 0.091, 0.098], [0.751, 0.639, 0.956]],
                    [[0.721, 0.163, 0.543], [0.454, 0.281, 0.909]],
                    [[0.806, 0.348, 0.279], [0.462, 0.656, 0.388]]],
                   dtype=np.float64))

# -------------------------------------------------- MatXb
cmp(mat.mat1b(), np.array([[159, 88],
                           [244, 66],
                           [3, 136]],
                          dtype=np.uint8))

cmp(mat.mat2b(), np.array([[[129, 29], [204, 240]],
                           [[76, 118], [15, 107]],
                           [[223, 111], [151, 208]]],
                          dtype=np.uint8))

cmp(mat.mat3b(), np.array([[[40, 144, 104], [80, 141, 228]],
                           [[68, 80, 217], [184, 146, 112]],
                           [[255, 111, 230], [84, 97, 224]]],
                          dtype=np.uint8))

cmp(mat.mat4b(), np.array([[[252, 1, 156, 161], [255, 168, 21, 182]],
                           [[97, 101, 64, 219], [185, 218, 198, 216]],
                           [[130, 222, 142, 185], [196, 3, 99, 224]]],
                          dtype=np.uint8))

mat.mat1b(np.array([[252, 108],
                    [93, 136],
                    [116, 201]],
                   dtype=np.uint8))

mat.mat3b(np.array([[[159, 161, 66], [103, 191, 179]],
                    [[10, 170, 215], [138, 178, 203]],
                    [[134, 107, 140], [177, 41, 169]]],
                   dtype=np.uint8))


# -------------------------------------------------- MatXs
cmp(mat.mat1s_r(), np.array([[58, -38],
                             [-6, -53],
                             [16921, 25357]],
                            dtype=np.short))

cmp(mat.mat2s_p(), np.array([[[81, 19], [-65, -2]],
                             [[-3, 22], [-55, 2]],
                             [[5575, 600], [-1720, 21920]]],
                            dtype=np.short))

mat.mat1s_r(np.array([[13, -88],
                      [78, 21],
                      [-11203, 24126]],
                     dtype=np.short))

mat.mat2s_p(np.array([[[53, -57], [-9, -18]],
                      [[-111, 110], [52, -103]],
                      [[2276, 11336], [18891, 7322]]],
                     dtype=np.short))

# -------------------------------------------------- MatXd

cmp(mat.mat1d(), np.array([[0.161, 0.173],
                           [0.623, 0.713],
                           [0.601, 0.306]],
                          dtype=np.float64))

cmp(mat.mat2d(), np.array([[[0.512, 0.705], [0.752, 0.684]],
                           [[0.285, 0.649], [0.968, 0.628]],
                           [[0.452, 0.652], [0.637, 0.576]]],
                          dtype=np.float64))

cmp(mat.mat3d(), np.array([[[0.534, 0.988, 0.492], [0.040, 0.123, 0.365]],
                           [[0.956, 0.016, 0.731], [0.374, 0.713, 0.739]],
                           [[0.082, 0.604, 0.901], [0.335, 0.118, 0.654]]],
                          dtype=np.float64))

cmp(mat.mat4d(), np.array([[[0.741, 0.510, 0.174, 0.642], [0.356, 0.444, 0.412, 0.769]],
                           [[0.766, 0.352, 0.150, 0.918], [0.034, 0.643, 0.534, 0.548]],
                           [[0.684, 0.116, 0.568, 0.869], [0.211, 0.550, 0.945, 0.762]]],
                          dtype=np.float64))
